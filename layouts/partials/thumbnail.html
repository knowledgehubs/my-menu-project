{{/* هذا هو الكود المسؤول عن تصغير الصور أوتوماتيكياً */}}
{{ $imageName := .image }}
{{ $skin := .skin }}
{{ $alt := .alt | default "" }}
{{ $w := .w | default 150 }}
{{ $h := .h | default 150 }}

{{/* 1. تحديد مسار الصورة في مجلد Assets */}}
{{ $imagePath := printf "images/%s/%s" $skin $imageName }}

{{/* 2. البحث عن الصورة */}}
{{ $res := resources.Get $imagePath }}

{{ if $res }}
  {{/* 3. إذا وجدت الصورة: تصغير وتحويل لـ WebP */}}
  {{ $thumb := $res.Fill (printf "%dx%d webp q80 smart" $w $h) }}
  <img 
    src="{{ $thumb.RelPermalink }}" 
    alt="{{ $alt }}" 
    width="{{ $w }}" 
    height="{{ $h }}" 
    loading="lazy" 
    class="thumb-img"
    style="object-fit: cover; width: 100%; height: 100%; border-radius: 8px;"
  >
{{ else }}
  {{/* 4. إذا لم توجد: صورة بديلة رمادية */}}
  <div style="width:{{$w}}px; height:{{$h}}px; background:#f3f4f6; display:flex; align-items:center; justify-content:center; color:#9ca3af; font-size:0.7rem; border-radius: 8px;">
    No Image
  </div>
{{ end }}
